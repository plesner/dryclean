// Temporary hack to implement splitting the base name out of a full domain
// name. Remove when chrome supports chrome.tld.

/**
 * Extracts this URL's base domain and subdomain and stores them in the
 * appropriate fields.
 */
function parseDomainParts(domain, resultOpt) {
  var result = resultOpt || {};
  function getBaseIndex(parts, map, offset) {
    if (parts.length == 0) {
      return offset;
    } else if (map == 1) {
      return offset - 1;
    } else {
      var last = parts[parts.length - 1];
      if (map.hasOwnProperty(last)) {
        return getBaseIndex(parts.slice(0, parts.length - 1), map[last], offset - 1);
      } else {
        return offset - 1;
      }
    }
  }
  var parts = domain.split(".");
  var index = getBaseIndex(parts, SUFFIXES, parts.length);
  result.baseDomain = parts.slice(index).join(".")
  result.baseName = parts[index];
  return result;
};

var SUFFIXES = ({ac:{com:1,edu:1,gov:1,mil:1,net:1,org:1},ad:{nom:1},ae:{ac:1,co:1,gov:1,mil:1,net:1,org:1,sch:1},af:{com:1,edu:1,gov:1,net:1,org:1},ag:{co:1,com:1,net:1,nom:1,org:1},ai:{com:1,net:1,off:1,org:1},al:{com:1,edu:1,gov:1,mil:1,net:1,org:1},am:1,an:{com:1,edu:1,net:1,org:1},ao:{co:1,ed:1,gv:1,it:1,og:1,pb:1},aq:1,arpa:{e164:1,ip6:1,iris:1,uri:1,urn:1},as:{gov:1},asia:1,at:{ac:1,biz:1,co:1,gv:1,info:1,or:1,priv:1},au:{act:1,asn:1,com:1,conf:1,csiro:1,edu:{act:1,nsw:1,nt:1,qld:1,sa:1,tas:1,vic:1,wa:1},gov:{act:1,nt:1,qld:1,sa:1,tas:1,vic:1,wa:1},id:1,info:1,net:1,nsw:1,nt:1,org:1,oz:1,qld:1,sa:1,tas:1,vic:1,wa:1},aw:{com:1},ax:1,az:{biz:1,com:1,edu:1,gov:1,info:1,int:1,mil:1,name:1,net:1,org:1,pp:1,pro:1},ba:{co:1,com:1,edu:1,gov:1,mil:1,net:1,org:1,rs:1,unbi:1,unsa:1},bb:{biz:1,com:1,edu:1,gov:1,info:1,net:1,org:1,store:1},be:{ac:1},bf:{gov:1},bg:1,bh:{com:1,edu:1,gov:1,net:1,org:1},bi:{co:1,com:1,edu:1,or:1,org:1},biz:1,bj:{asso:1,barreau:1,gouv:1},bm:{com:1,edu:1,gov:1,net:1,org:1},bo:{com:1,edu:1,gob:1,gov:1,int:1,mil:1,net:1,org:1,tv:1},br:{adm:1,adv:1,agr:1,am:1,arq:1,art:1,ato:1,b:1,bio:1,blog:1,bmd:1,can:1,cim:1,cng:1,cnt:1,com:1,coop:1,ecn:1,edu:1,emp:1,eng:1,esp:1,etc:1,eti:1,far:1,flog:1,fm:1,fnd:1,fot:1,fst:1,g12:1,ggf:1,gov:1,imb:1,ind:1,inf:1,jor:1,jus:1,lel:1,mat:1,med:1,mil:1,mus:1,net:1,nom:1,not:1,ntr:1,odo:1,org:1,ppg:1,pro:1,psc:1,psi:1,qsl:1,radio:1,rec:1,slg:1,srv:1,taxi:1,teo:1,tmp:1,trd:1,tur:1,tv:1,vet:1,vlog:1,wiki:1,zlg:1},bs:{com:1,edu:1,gov:1,net:1,org:1},bt:{com:1,edu:1,gov:1,net:1,org:1},bw:{co:1,org:1},by:{com:1,gov:1,mil:1,of:1},bz:{com:1,edu:1,gov:1,net:1,org:1},ca:{ab:1,bc:1,co:1,gc:1,mb:1,nb:1,nf:1,nl:1,ns:1,nt:1,nu:1,on:1,pe:1,qc:1,sk:1,yk:1},cat:1,cc:1,cd:{gov:1},cf:1,cg:1,ch:1,ci:{ac:1,asso:1,co:1,com:1,ed:1,edu:1,go:1,gouv:1,int:1,md:1,net:1,or:1,org:1,presse:1},cl:{co:1,gob:1,gov:1,mil:1},cm:{gov:1},cn:{ac:1,ah:1,bj:1,com:1,cq:1,edu:1,fj:1,gd:1,gov:1,gs:1,gx:1,gz:1,ha:1,hb:1,he:1,hi:1,hk:1,hl:1,hn:1,jl:1,js:1,jx:1,ln:1,mil:1,mo:1,net:1,nm:1,nx:1,org:1,qh:1,sc:1,sd:1,sh:1,sn:1,sx:1,tj:1,tw:1,xj:1,xz:1,yn:1,zj:1},co:{arts:1,com:1,edu:1,firm:1,gov:1,info:1,int:1,mil:1,net:1,nom:1,org:1,rec:1,web:1},com:{appspot:1,ar:1,br:1,cn:1,de:1,eu:1,gb:1,gr:1,hu:1,jpn:1,kr:1,no:1,operaunite:1,qc:1,ru:1,sa:1,se:1,uk:1,us:1,uy:1,za:1},coop:1,cr:{ac:1,co:1,ed:1,fi:1,go:1,or:1,sa:1},cu:{com:1,edu:1,gov:1,inf:1,net:1,org:1},cv:1,cx:{gov:1},cz:1,de:{com:1},dj:1,dk:1,dm:{com:1,edu:1,gov:1,net:1,org:1},do:{art:1,com:1,edu:1,gob:1,gov:1,mil:1,net:1,org:1,sld:1,web:1},dz:{art:1,asso:1,com:1,edu:1,gov:1,net:1,org:1,pol:1},ec:{com:1,edu:1,fin:1,gob:1,gov:1,info:1,k12:1,med:1,mil:1,net:1,org:1,pro:1},edu:1,ee:{aip:1,com:1,edu:1,fie:1,gov:1,lib:1,med:1,org:1,pri:1,riik:1},eg:{com:1,edu:1,eun:1,gov:1,mil:1,name:1,net:1,org:1,sci:1},es:{com:1,edu:1,gob:1,nom:1,org:1},eu:1,fi:{aland:1,iki:1},fm:1,fo:1,fr:{aeroport:1,assedic:1,asso:1,avocat:1,avoues:1,cci:1,chambagri:1,com:1,gouv:1,greta:1,medecin:1,nom:1,notaires:1,pharmacien:1,port:1,prd:1,presse:1,tm:1,veterinaire:1},ga:1,gd:1,ge:{com:1,edu:1,gov:1,mil:1,net:1,org:1,pvt:1},gf:1,gg:{co:1,gov:1,net:1,org:1,sch:1},gh:{com:1,edu:1,gov:1,mil:1,org:1},gi:{com:1,edu:1,gov:1,ltd:1,mod:1,org:1},gl:1,gm:1,gn:{ac:1,com:1,edu:1,gov:1,net:1,org:1},gov:1,gp:{asso:1,com:1,edu:1,mobi:1,net:1,org:1},gq:1,gr:{com:1,edu:1,gov:1,net:1,org:1},gs:1,gw:1,gy:{co:1,com:1,net:1},hk:{com:1,edu:1,gov:1,idv:1,net:1,org:1},hm:1,hn:{com:1,edu:1,gob:1,mil:1,net:1,org:1},hr:{com:1,from:1,iz:1,name:1},ht:{adult:1,art:1,asso:1,com:1,coop:1,edu:1,firm:1,gouv:1,info:1,med:1,net:1,org:1,perso:1,pol:1,pro:1,rel:1,shop:1},hu:{2000:1,agrar:1,bolt:1,casino:1,city:1,co:1,erotica:1,erotika:1,film:1,forum:1,games:1,hotel:1,info:1,ingatlan:1,jogasz:1,konyvelo:1,lakas:1,media:1,news:1,org:1,priv:1,reklam:1,sex:1,shop:1,sport:1,suli:1,szex:1,tm:1,tozsde:1,utazas:1,video:1},id:{ac:1,co:1,go:1,mil:1,net:1,or:1,sch:1,web:1},ie:{gov:1},im:{ac:1,co:{ltd:1,plc:1},gov:1,net:1,nic:1,org:1},in:{ac:1,co:1,edu:1,firm:1,gen:1,gov:1,ind:1,mil:1,net:1,nic:1,org:1,res:1},info:1,int:{eu:1},io:{com:1},iq:{com:1,edu:1,gov:1,mil:1,net:1,org:1},ir:{ac:1,co:1,gov:1,id:1,net:1,org:1,sch:1},is:{com:1,edu:1,gov:1,int:1,net:1,org:1},it:{edu:1,gov:1},je:{co:1,gov:1,net:1,org:1,sch:1},jo:{com:1,edu:1,gov:1,mil:1,name:1,net:1,org:1,sch:1},jobs:1,jp:{ac:1,ad:1,co:1,ed:1,go:1,gr:1,lg:1,ne:1,or:1},kg:{com:1,edu:1,gov:1,mil:1,net:1,org:1},ki:{biz:1,com:1,edu:1,gov:1,info:1,net:1,org:1},km:{ass:1,asso:1,com:1,coop:1,edu:1,gouv:1,gov:1,medecin:1,mil:1,nom:1,notaires:1,org:1,pharmaciens:1,prd:1,presse:1,tm:1,veterinaire:1},kn:{edu:1,gov:1,net:1,org:1},kp:{com:1,edu:1,gov:1,org:1,rep:1,tra:1},kr:{ac:1,busan:1,chungbuk:1,chungnam:1,co:1,daegu:1,daejeon:1,es:1,gangwon:1,go:1,gwangju:1,gyeongbuk:1,gyeonggi:1,gyeongnam:1,hs:1,incheon:1,jeju:1,jeonbuk:1,jeonnam:1,kg:1,mil:1,ms:1,ne:1,or:1,pe:1,re:1,sc:1,seoul:1,ulsan:1},ky:{com:1,edu:1,gov:1,net:1,org:1},kz:{com:1,edu:1,gov:1,mil:1,net:1,org:1},la:{c:1,com:1,edu:1,gov:1,info:1,int:1,net:1,org:1,per:1},lb:{com:1,edu:1,gov:1,net:1,org:1},lc:{co:1,com:1,edu:1,gov:1,net:1,org:1},li:1,lk:{assn:1,com:1,edu:1,gov:1,grp:1,hotel:1,int:1,ltd:1,net:1,ngo:1,org:1,sch:1,soc:1,web:1},lr:{com:1,edu:1,gov:1,net:1,org:1},ls:{co:1,org:1},lt:{gov:1},lu:1,lv:{asn:1,com:1,conf:1,edu:1,gov:1,id:1,mil:1,net:1,org:1},ly:{com:1,edu:1,gov:1,id:1,med:1,net:1,org:1,plc:1,sch:1},ma:{ac:1,co:1,gov:1,net:1,org:1,press:1},mc:{asso:1,tm:1},md:1,me:{ac:1,co:1,edu:1,gov:1,its:1,net:1,org:1,priv:1},mg:{com:1,edu:1,gov:1,mil:1,nom:1,org:1,prd:1,tm:1},mh:1,mil:1,mk:{com:1,edu:1,gov:1,inf:1,name:1,net:1,org:1},ml:{com:1,edu:1,gouv:1,gov:1,net:1,org:1,presse:1},mn:{edu:1,gov:1,org:1},mo:{com:1,edu:1,gov:1,net:1,org:1},mobi:1,mp:1,mq:1,mr:{gov:1},ms:1,mu:{ac:1,co:1,com:1,gov:1,net:1,or:1,org:1},mv:{aero:1,biz:1,com:1,coop:1,edu:1,gov:1,info:1,int:1,mil:1,museum:1,name:1,net:1,org:1,pro:1},mw:{ac:1,biz:1,co:1,com:1,coop:1,edu:1,gov:1,int:1,museum:1,net:1,org:1},mx:{com:1,edu:1,gob:1,net:1,org:1},my:{com:1,edu:1,gov:1,mil:1,name:1,net:1,org:1},na:{ca:1,cc:1,co:1,com:1,dr:1,in:1,info:1,mobi:1,mx:1,name:1,or:1,org:1,pro:1,school:1,tv:1,us:1,ws:1},name:1,nc:{asso:1},ne:1,net:{gb:1,jp:1,se:1,uk:1,za:1},nf:{arts:1,com:1,firm:1,info:1,net:1,other:1,per:1,rec:1,store:1,web:1},ng:{ac:1,com:1,edu:1,gov:1,net:1,org:1},nl:{bv:1,co:1},no:{co:1},nr:{biz:1,com:1,edu:1,gov:1,info:1,net:1,org:1},nu:1,org:{ae:1,us:1,za:1},pa:{abo:1,ac:1,com:1,edu:1,gob:1,ing:1,med:1,net:1,nom:1,org:1,sld:1},pe:{com:1,edu:1,gob:1,mil:1,net:1,nom:1,org:1},pf:{com:1,edu:1,org:1},ph:{com:1,edu:1,gov:1,i:1,mil:1,net:1,ngo:1,org:1},pk:{biz:1,com:1,edu:1,fam:1,gob:1,gok:1,gon:1,gop:1,gos:1,gov:1,info:1,net:1,org:1,web:1},pl:{co:1},pm:1,pn:{co:1,edu:1,gov:1,net:1,org:1},pr:{ac:1,biz:1,com:1,edu:1,est:1,gov:1,info:1,isla:1,name:1,net:1,org:1,pro:1,prof:1},pro:{aca:1,bar:1,cpa:1,eng:1,jur:1,law:1,med:1},ps:{com:1,edu:1,gov:1,net:1,org:1,plo:1,sec:1},pt:{com:1,edu:1,gov:1,int:1,net:1,nome:1,org:1,publ:1},pw:{belau:1,co:1,ed:1,go:1,ne:1,or:1},qa:{com:1,edu:1,gov:1,mil:1,name:1,net:1,org:1,sch:1},re:{asso:1,com:1,nom:1},ro:{arts:1,com:1,firm:1,info:1,nom:1,nt:1,org:1,rec:1,store:1,tm:1,www:1},rs:{ac:1,co:1,edu:1,gov:1,in:1,org:1},ru:{ac:1,adygeya:1,altai:1,amur:1,amursk:1,arkhangelsk:1,astrakhan:1,baikal:1,bashkiria:1,belgorod:1,bir:1,bryansk:1,buryatia:1,cbg:1,chel:1,chelyabinsk:1,chita:1,chukotka:1,chuvashia:1,cmw:1,com:1,dagestan:1,dudinka:1,edu:1,fareast:1,gov:1,grozny:1,int:1,irkutsk:1,ivanovo:1,izhevsk:1,jamal:1,jar:1,kalmykia:1,kaluga:1,kamchatka:1,karelia:1,kazan:1,kchr:1,kemerovo:1,khabarovsk:1,khakassia:1,khv:1,kirov:1,kms:1,koenig:1,komi:1,kostroma:1,krasnoyarsk:1,kuban:1,kurgan:1,kursk:1,kustanai:1,kuzbass:1,lipetsk:1,magadan:1,magnitka:1,mari:1,marine:1,mil:1,mordovia:1,mosreg:1,msk:1,murmansk:1,mytis:1,nakhodka:1,nalchik:1,net:1,nkz:1,nnov:1,norilsk:1,nov:1,novosibirsk:1,nsk:1,omsk:1,orenburg:1,org:1,oryol:1,oskol:1,palana:1,penza:1,perm:1,pp:1,pskov:1,ptz:1,pyatigorsk:1,rnd:1,rubtsovsk:1,ryazan:1,sakhalin:1,samara:1,saratov:1,simbirsk:1,smolensk:1,snz:1,spb:1,stavropol:1,stv:1,surgut:1,syzran:1,tambov:1,tatarstan:1,test:1,tom:1,tomsk:1,tsaritsyn:1,tsk:1,tula:1,tuva:1,tver:1,tyumen:1,udm:1,udmurtia:1,vdonsk:1,vladikavkaz:1,vladimir:1,vladivostok:1,volgograd:1,vologda:1,voronezh:1,vrn:1,vyatka:1,yakutia:1,yamal:1,yaroslavl:1,yekaterinburg:1,zgrad:1},rw:{ac:1,co:1,com:1,edu:1,gouv:1,gov:1,int:1,mil:1,net:1},sa:{com:1,edu:1,gov:1,med:1,net:1,org:1,pub:1,sch:1},sb:{com:1,edu:1,gov:1,net:1,org:1},sc:{com:1,edu:1,gov:1,net:1,org:1},sd:{com:1,edu:1,gov:1,info:1,med:1,net:1,org:1},se:{a:1,ac:1,b:1,bd:1,brand:1,c:1,d:1,e:1,f:1,fh:1,fhsk:1,fhv:1,g:1,h:1,i:1,k:1,komforb:1,kommunalforbund:1,komvux:1,l:1,lanbib:1,m:1,n:1,naturbruksgymn:1,o:1,org:1,p:1,parti:1,pp:1,press:1,r:1,s:1,sshn:1,t:1,tm:1,u:1,w:1,x:1,y:1,z:1},sg:{com:1,edu:1,gov:1,net:1,org:1,per:1},sh:1,si:1,sk:1,sl:{com:1,edu:1,gov:1,net:1,org:1},sm:1,sn:{art:1,com:1,edu:1,gouv:1,org:1,perso:1,univ:1},so:{com:1,net:1,org:1},sr:1,st:{co:1,com:1,consulado:1,edu:1,embaixada:1,gov:1,mil:1,net:1,org:1,principe:1,saotome:1,store:1},su:1,sy:{com:1,edu:1,gov:1,mil:1,net:1,org:1},sz:{ac:1,co:1,org:1},tc:1,td:1,tel:1,tf:1,tg:1,th:{ac:1,co:1,go:1,in:1,mi:1,net:1,or:1},tj:{ac:1,biz:1,co:1,com:1,edu:1,go:1,gov:1,int:1,mil:1,name:1,net:1,nic:1,org:1,test:1,web:1},tk:1,tl:{gov:1},tm:1,tn:{agrinet:1,com:1,defense:1,edunet:1,ens:1,fin:1,gov:1,ind:1,info:1,intl:1,mincom:1,nat:1,net:1,org:1,perso:1,rnrt:1,rns:1,rnu:1,tourism:1,turen:1},to:{com:1,edu:1,gov:1,mil:1,net:1,org:1},tr:{nc:{gov:1}},travel:1,tt:{aero:1,biz:1,co:1,com:1,coop:1,edu:1,gov:1,info:1,int:1,jobs:1,mobi:1,museum:1,name:1,net:1,org:1,pro:1,travel:1},tv:1,tw:{club:1,com:1,ebiz:1,edu:1,game:1,gov:1,idv:1,mil:1,net:1,org:1},tz:{ac:1,co:1,go:1,mil:1,ne:1,or:1,sc:1},ua:{cherkassy:1,chernigov:1,chernovtsy:1,ck:1,cn:1,co:1,com:1,crimea:1,cv:1,dn:1,dnepropetrovsk:1,donetsk:1,dp:1,edu:1,gov:1,if:1,in:1,kh:1,kharkov:1,kherson:1,khmelnitskiy:1,kiev:1,kirovograd:1,km:1,kr:1,ks:1,kv:1,lg:1,lugansk:1,lutsk:1,lviv:1,mk:1,net:1,nikolaev:1,od:1,odessa:1,org:1,pl:1,poltava:1,pp:1,rovno:1,rv:1,sebastopol:1,sumy:1,te:1,ternopil:1,uzhgorod:1,vinnica:1,vn:1,zaporizhzhe:1,zhitomir:1,zp:1,zt:1},ug:{ac:1,co:1,go:1,ne:1,or:1,sc:1},uk:{co:1},us:{ak:{cc:1,k12:1,lib:1},al:{cc:1,k12:1,lib:1},ar:{cc:1,k12:1,lib:1},as:{cc:1,k12:1,lib:1},az:{cc:1,k12:1,lib:1},ca:{cc:1,k12:1,lib:1},co:{cc:1,k12:1,lib:1},ct:{cc:1,k12:1,lib:1},dc:{cc:1,k12:1,lib:1},de:{cc:1,k12:1,lib:1},dni:1,fed:1,fl:{cc:1,k12:1,lib:1},ga:{cc:1,k12:1,lib:1},gu:{cc:1,k12:1,lib:1},hi:{cc:1,lib:1},ia:{cc:1,k12:1,lib:1},id:{cc:1,k12:1,lib:1},il:{cc:1,k12:1,lib:1},in:{cc:1,k12:1,lib:1},isa:1,kids:1,ks:{cc:1,k12:1,lib:1},ky:{cc:1,k12:1,lib:1},la:{cc:1,k12:1,lib:1},ma:{cc:1,k12:{chtr:1,paroch:1,pvt:1},lib:1},md:{cc:1,k12:1,lib:1},me:{cc:1,k12:1,lib:1},mi:{cc:1,k12:1,lib:1},mn:{cc:1,k12:1,lib:1},mo:{cc:1,k12:1,lib:1},ms:{cc:1,k12:1,lib:1},mt:{cc:1,k12:1,lib:1},nc:{cc:1,k12:1,lib:1},nd:{cc:1,k12:1,lib:1},ne:{cc:1,k12:1,lib:1},nh:{cc:1,k12:1,lib:1},nj:{cc:1,k12:1,lib:1},nm:{cc:1,k12:1,lib:1},nsn:1,nv:{cc:1,k12:1,lib:1},ny:{cc:1,k12:1,lib:1},oh:{cc:1,k12:1,lib:1},ok:{cc:1,k12:1,lib:1},or:{cc:1,k12:1,lib:1},pa:{cc:1,k12:1,lib:1},pr:{cc:1,k12:1,lib:1},ri:{cc:1,k12:1,lib:1},sc:{cc:1,k12:1,lib:1},sd:{cc:1,k12:1,lib:1},tn:{cc:1,k12:1,lib:1},tx:{cc:1,k12:1,lib:1},ut:{cc:1,k12:1,lib:1},va:{cc:1,k12:1,lib:1},vi:{cc:1,k12:1,lib:1},vt:{cc:1,k12:1,lib:1},wa:{cc:1,k12:1,lib:1},wi:{cc:1,k12:1,lib:1},wv:{cc:1,k12:1,lib:1},wy:{cc:1,k12:1,lib:1}},uz:{co:1,com:1},va:1,vc:{com:1,edu:1,gov:1,mil:1,net:1,org:1},vg:1,vi:{co:1,com:1,k12:1,net:1,org:1},vn:{ac:1,biz:1,com:1,edu:1,gov:1,health:1,info:1,int:1,name:1,net:1,org:1,pro:1},vu:1,wf:1,ws:{com:1,edu:1,gov:1,net:1,org:1},xxx:1,yt:1});
